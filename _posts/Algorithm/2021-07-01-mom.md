---
layout: post
# current: post
# cover: assets/built/images/python-logo.png
navigation: True
title: MOM (Median of Medians) 알고리즘
tags: [python]
class: post-template
subclass: "post tag-python"
author: parkjju
---

- 기존 QuickSelect알고리즘은 평균 O(n)시간이지만, O(n^2)로 늘어날 수 있는 원인이 Pivot설정에 있다. (순전히 운에 맡기기 때문)

- pivot을 어떻게 고르느냐?

  - 리스트 A또는 B에 들어있는 값의 갯수가 n/c보다 작도록 pivot을 고르는것. (리스트 A는 피봇보다 작은 값들, B는 반대)
  - n -> n/c -> .... -> n/(c^k) => logc(n)횟수만큼 재귀함수를 호출한다.

- 비교횟수

  1. pivot을 고르는 데에 필요한 비교횟수 p
  2. 리스트 A와 B를 나누는 데에 필요한 횟수 (pivot과 리스트 A를 비교) -> n번
  3. 최종 - logc(n) \* (p+n), 재귀함수 각 호출당 p+n, 전체 재귀함수 호출횟수 logc(n)

  - -> O(nlogn)을 보장하게됨.

- MOM (Median of Medians) 알고리즘 - 피봇을 잘 고르자 !!

  1. L : n개의 숫자 , `MOM(L, k)`, k는 index
  2. 5개씩 group -> 그룹 수는 약 n/5
  3. 각 그룹의 중간값을 구한다. -> 상수시간에 가능 (약 6번) => 약 (5/n)\*6 횟수만큼 비교
  4. 각 그룹의 중앙값들을 한 리스트에 모아준 다음 해당 리스트의 중앙값을 다시 구한다.
  5. m* = MOM(medians, |medians|/2), m*는 피봇
  6. A m* B, n번 비교하여 A,B,m*구성
  7. 이후로는 QuickSelect과 동일하며, 재귀함수는 MOM을 호출하면된다.

- 호출횟수 T -> T(|A|) or T(|B|)

  - T(|A|) <= T(n/c) , T(|B|) <= T(n/c)
  - 점화식 T(n) = 6n/5 + T(n/5) + n + T(n/c)
  - 11n/5 -> 그룹을 만들어서 median 구함, T(n/5) -> 각 그룹의 median of median을 구하는 횟수, T(c/n) -> A, m\*, B에서 k번째로 작은 값을 찾는 횟수

- Todo -> |A|<=n/c, |B|<=n/c임을 증명해야함!

<img src="/assets/images/cproof.jpg" height="60%" width="40%"/>

## mom 수행시간 분석

- T(n) = T(3n/4) + T(n/5) + 11n/5, T(1) = 1

  - 기존의 전개 방식은 분수가 계수이므로 불가능
  - Guess!! T(n) <= 44n? -> T(n)을 임의 추측, 설정하여 **귀납법으로 전개**

- 귀납법?

  1. check basecase -> 증명하고자 하는 식에 1을 대입한 수가 실제 초항값과 동일한지 검사
  2. n보다 작은 모든 값에 대해서 등식 성립한다고 **가정**
  3. index가 n일때 성립하는지 증명하기

- MOM귀납법 증명

  1. T(1) = 1 <= 44 -> OK!!
  2. T(n) <= 44n이 n보다 작은 인덱스에서 성립함을 가정.
  3. T(n) = T(3n/4) + T(n/5) + 11n/5
     - 3n/4는 n보다 작으며, n보다 작은 값에 대하여 T(n)은 44n보다 작다.
     - n/5는 n보다 작으며, n보다 작은 값에 대하여 T(n)은 44n보다 작다.
  4. T(3n/4) + T(n/5) + 11n/5 <= 44\*3n/4 + 44\*n/5 + 11n/5 = 33n + 11n = 44n
  5. 등식이 n에서도 성립함을 확인하였으므로, 수행시간이 O(n)임이 증명됨!

- guess구하기
  1. T(n) <= cn // 적당한 상수시간을 정하여서, 직접 귀납법 전개해보면 c가 구해진다
  2. T(n) <= 3cn/4 + cn/5 + 11n/5 = 19cn/20 + 11n/5 <= cn, 11n/5 <= cn/20, c=44!!!!!
